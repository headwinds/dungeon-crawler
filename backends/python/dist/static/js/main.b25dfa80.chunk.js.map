{"version":3,"sources":["constants/action-types.js","types/dungeonTypes.js","reducers/grid.js","reducers/player.js","config.js","reducers/ui.js","reducers/index.js","components/inventory-item.js","components/inventory.js","components/item-interactions.js","containers/backpack.js","actions/currency.js","constants/settings.js","bin/game-map-creator.js","types/weaponTypes.js","types/shieldTypes.js","types/enemyTypes.js","types/neutralTypes.js","types/npcTypes.js","bin/entity-creator.js","models/ItemModel.js","models/EnemyModel.js","models/WorldModel.js","models/WeaponModel.js","worldsets/common/commonSeq.js","actions/index.js","worldsets/worldsets.js","components/cell.js","utils/currency-utils.js","actions/player.js","actions/npc.js","containers/player.js","utils/npc-utils.js","actions/examine.js","containers/game.js","components/header.js","containers/messages.js","containers/npc-store/storeItem.js","containers/npc-store/store.js","containers/npc-store/npc-store.js","containers/player-settings.js","components/score.js","components/scoreboard.js","containers/tips.js","containers/DungeonCrawler.js","index.js"],"names":["ADD_GOLD","REMOVE_GOLD","ADD_SILVER","REMOVE_SILVER","ADD_COPPER","REMOVE_COPPER","ADD_WEAPON","ADD_SHIELD","ADD_XP","CHANGE_ENTITY","CHANGE_PLAYER_POSITION","CREATE_LEVEL","MODIFY_HEALTH","NEW_MESSAGE","PLAYER_BOUGHT_ITEM","PLAYER_SOLD_ITEM","PLAYER_TRADE_SUCCESS","PLAYER_TRADE_FAIL","TALK_TO_NPC","RESTART","TOGGLE_FOG_MODE","LOOK_AROUND","RESET_DUNGEON","SET_END_GAME","UPDATE_DUNGEON","SET_DUNGEON_LEVEL","TOGGLE_NPC_STORE","NPC_SOLD_ITEM","dungeonTypes","id","name","exits","exitsComplete","questsComplete","type","initialState","entities","dungeonLevel","dungeonTransit","dungeon","Object","objectSpread","playerPosition","endGame","health","xp","gold","currency","silver","copper","weapon","damage","shield","protection","examining","iconClass","title","action","aroundMe","inventory","npcsAroundMe","currentConfig","OWNER","TIPS_ALONG_BOTTOM","GAME_SHOW_TITLE","VP_TYPE","FOG_MODE","GAME_TITLE","GAME_SUBTITLE","GAME_URL","MAX_INVENTORY_ITEMS","BACKEND","WORLDSET","config","VP_WIDTH_RATIO_CONTAINED","VP_HEIGHT_RATIO_CONTAINED","VP_HEIGHT_RATIO_FULL","VP_WIDTH_RATIO_FULL","FULL_GRID_RATIO_WIDTH","FULL_GRID_RATIO_HEIGHT","CURRENCY_GOLD_LABEL","CURRENCY_SILVER_LABEL","CURRENCY_COPPER_LABEL","fogMode","messages","showNPCStore","rootReducer","combineReducers","grid","state","arguments","length","undefined","_ref","payload","t","_payload$coords","slicedToArray","coords","x","y","update","defineProperty","$set","entity","level","transit","player","ui","concat","toConsumableArray","inventory_item","item","handleMouseOver","handleMouseOut","handleClick","console","log","react_default","a","createElement","onMouseOver","onMouseOut","onClick","className","style","display","position","border","margin","width","height","Inventory","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","isOpen","handleKeyPress","bind","assertThisInitialized","window","addEventListener","removeEventListener","setState","_this2","list","props","items","map","idx","key","flexDirection","e","keyCode","toggleOpen","Component","connect","dispatch","ItemInteractions","Backpack","itemSelected","components_inventory","handleItemSelected","addSilver","addCopper","addCurrency","Math","floor","innerWidth","innerHeight","GRID_WIDTH","GRID_HEIGHT","MAX_ROOMS","ROOM_SIZE_RANGE","game_map_creator","placeCells","_ref2","_ref2$width","_ref2$height","i","j","c","push","opacity","_","random","_c$ROOM_SIZE_RANGE","min","max","firstRoom","growMap","seedRooms","counter","maxRooms","_ref3","range","_range","roomValues","north","doorx","doory","east","south","west","placedRooms","forEach","room","_ref$width","_ref$height","isValidRoomPlacement","createRoomsFromSeed","pop","apply","weaponTypes","shieldTypes","enemyTypes","1","2","3","4","5","neutralCreatures","armour","speed","accuracy","treaure","cost","npcTypes","description","profession","npcTypes_ref","portrait","selected","greetings","entity_creator","gameMap","gameWorldSeq","bosses","npcTrader","filter","npc","toLowerCase","npcs","enemies","neutral","neutralTypes","healthPotionObj","get","potion","modifies","potions","mushroomObj","food","mushrooms","weapons","qualifyingWeapons","assign","shields","qualifyingShields","ItemModel","Record","by","EnemyModel","WorldModel","itemSet","enemySet","neutralSet","npcSet","shieldSet","weaponSet","potionItem","mushroomItem","Set","ratEnemy","koboldEnemy","darkElfEnemy","bossEnemy","world","commonSeq","Seq","toJS","headwinds","peted","addXP","changeEntity","changePlayerPosition","createLevel","populateEntities","createMap","modifyHealth","newMessage","restart","setDungeonLevel","setEndGame","resetDungeon","src_actions","vector","getState","_getState","_grid$playerPosition$","slice","_grid$playerPosition$2","_vector","vectorX","vectorY","newPosition","newPlayer","destination","actions","playerLevel","enemyDamageTaken","playerDamageTaken","setTimeout","batchActions","oldDungeon","newDungeonState","addShield","components_cell","cell","distance","visible","zone","opacityValue","getCreditsAsCopper","itemTradeFail","tradeItem","buyer","seller","myTotalCopper","itemTotalCopper","newPlayerCurrency","newTotalCopper","goldRemainder","getPlayerCurrencyAfterBuy","newPlayerInventory","npcSoldItem","message","Player","_this$props$cellProps","cellProps","lookAround","entitiesBesideMe","row","closeByEntities","distanceFromPlayer","group","getNPCsAroundMe","talkToNPC","about","Grid","viewportWidth","viewportHeight","handleResize","VP_HEIGHT_OFFSET","VP_MINIMUM_HEIGHT","VP_WIDTH_RATIO","VP_HEIGHT_RATIO","throttle","debounce","triggerOpeningMessages","playerInput","target","_this$props$grid$play","playerX","playerY","top","clamp","right","bottom","left","cells","abs","playerCellProps","containers_player","header","stripClass","show","msg","storeItem","scope","displayCost","rowStle","flexDireciton","justifyContent","Store","randomIdx","storeOwner","conversation","selectedItem","self","selectedNPC","_this$props","handleSelectItemClick","handleBuyItemClick","defaultItems","NPCStore","nextProps","handleSelectNPC","getPickNPC","store","getStore","PlayerSettings","restartGame","toggleFogMode","onChange","checked","htmlFor","score","value","scoreboard","panelClass","classes","_default","tips","displayIdx","intervalId","setInterval","clearInterval","DungeonCrawler","requiresAuthentication","authenticated","greet","authenticateCheckComplete","handleTwitterLoginClick","url","document","domain","axios","then","response","data","screen_name","catch","error","errored","finally","_this3","sidebarClass","app","game","href","color","textDecoration","cursor","npc_store","backpack","player_settings","containers_messages","tips_default","require","loggerMiddleware","createLogger","actionTransformer","reduce","result","next","createStoreWithMiddleware","applyMiddleware","thunk","createStore","ReactDOM","render","lib","enableBatching","reducers","containers_DungeonCrawler","getElementById"],"mappings":"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","file":"static/js/main.b25dfa80.chunk.js","sourcesContent":["// PLAYER\nexport const ADD_GOLD = 'ADD_GOLD';\nexport const REMOVE_GOLD = 'REMOVE_GOLD';\nexport const ADD_SILVER = 'ADD_SILVER';\nexport const REMOVE_SILVER = 'REMOVE_SILVER';\nexport const ADD_COPPER = 'ADD_COPPER';\nexport const REMOVE_COPPER = 'REMOVE_COPPER';\nexport const ADD_WEAPON = 'ADD_WEAPON';\nexport const REMOVE_WEAPON = 'REMOVE_WEAPON';\nexport const ADD_SHIELD = 'ADD_SHIELD';\nexport const REMOVE_SHIELD = 'REMOVE_SHIELD';\nexport const ADD_XP = 'ADD_XP';\nexport const CHANGE_ENTITY = 'CHANGE_ENTITY';\nexport const CHANGE_PLAYER_POSITION = 'CHANGE_PLAYER_POSITION';\nexport const CREATE_LEVEL = 'CREATE_LEVEL';\nexport const MODIFY_HEALTH = 'MODIFY_HEALTH';\nexport const NEW_MESSAGE = 'NEW_MESSAGE';\nexport const PLAYER_BOUGHT_ITEM = 'PLAYER_BOUGHT_ITEM';\nexport const PLAYER_SOLD_ITEM = 'PLAYER_SOLD_ITEM';\nexport const PLAYER_TRADE_SUCCESS = 'PLAYER_TRADE_SUCCESS';\nexport const PLAYER_TRADE_FAIL = 'PLAYER_TRADE_FAIL';\nexport const INTERACT_WITH_NEUTRAL = 'INTERACT_WITH_NEUTRAL';\nexport const TALK_TO_NPC = 'TALK_TO_NPC';\n\n// GENERAL\nexport const RESTART = 'RESTART';\nexport const TOGGLE_FOG_MODE = 'TOGGLE_FOG_MODE';\nexport const LOOK_AROUND = 'LOOK_AROUND';\nexport const LEVEL_EXIT = 'LEVEL_EXIT';\nexport const LEVEL_ENTER = 'LEVEL_ENTER';\n\n// DUNGEON\nexport const RESET_DUNGEON = 'RESET_DUNGEON';\nexport const SET_END_GAME = 'SET_END_GAME';\nexport const UPDATE_DUNGEON = 'UPDATE_DUNGEON';\nexport const SET_DUNGEON_LEVEL = 'SET_DUNGEON_LEVEL';\n\n// NPC\nexport const TOGGLE_NPC_STORE = 'TOGGLE_NPC_STORE';\nexport const SELECT_NPC = 'SELECT_NPC';\nexport const NPC_BOUGHT_ITEM = 'NPC_BOUGHT_ITEM';\nexport const NPC_SOLD_ITEM = 'NPC_SOLD_ITEM';\nexport const NPC_TRADED_ITEM = 'NPC_TRADED_ITEM';\n\n","const dungeonTypes = [\n  { id: 0,\n    name: \"Bellwoods\",\n    exits: 1,\n    exitsComplete: 0,\n    questsComplete: 0,\n    type: 'dungeon',\n  },\n  { id: 1,\n    name: \"Bellwoods\",\n    exits: 2,\n    exitsComplete: 0,\n    questsComplete: 0,\n    type: 'dungeon',\n  },\n  { id: 2,\n    name: \"Bellwoods\",\n    exits: 5,\n    exitsComplete: 0,\n    questsComplete: 0,\n    type: 'dungeon',\n  },\n  { id: 3,\n    name: \"Bellwoods\",\n    exits: 5,\n    exitsComplete: 0,\n    questsComplete: 0,\n    type: 'dungeon',\n  },\n  { id: 4,\n    name: \"Bellwoods\",\n    exits: 5,\n    exitsComplete: 0,\n    questsComplete: 0,\n    type: 'dungeon',\n  },\n]\n\nexport default dungeonTypes;\n","import update from 'react-addons-update';\nimport * as t from '../constants/action-types';\nimport dungeonTypes from '../types/dungeonTypes';\n\nconst initialState = {\n\tentities: [[]],\n\tdungeonLevel: 0,\n\tdungeonTransit: 0, // when changing zones, this moves from a number like 2 to a string like 'transit-2' affecting the Cell\n\tdungeon: {...dungeonTypes[0]},\n\tplayerPosition: [],\n\tendGame: \"unknown\",\n};\n\nexport default (state = initialState, { type, payload }) => {\n\tswitch (type) {\n\t\tcase t.CHANGE_ENTITY: {\n\t\t\tconst [x, y] = payload.coords;\n\t\t\tconst entities =\tupdate(state.entities, {\n\t\t\t\t[y]: {\n\t\t\t\t\t[x]: {$set: payload.entity }\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn { ...state, entities };\n\t\t}\n\t\tcase t.CHANGE_PLAYER_POSITION:\n\t\t\treturn { ...state, playerPosition: payload };\n\t\tcase t.SET_END_GAME:\n\t\t\t\treturn { ...state, endGame: payload };\n\t\tcase t.CREATE_LEVEL:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tplayerPosition: payload.playerPosition,\n\t\t\t\tentities: payload.entities\n\t\t\t};\n\t\tcase t.UPDATE_DUNGEON:\n\t\t\t\treturn { ...state, dungeon: payload };\n\t\tcase t.SET_DUNGEON_LEVEL:\n\t\t\treturn { ...state, dungeonLevel: payload.level, dungeon: dungeonTypes[payload.level - 1], dungeonTransit: payload.transit };\n\t\tcase t.RESET_DUNGEON:\n\t\t\t\treturn { ...state, dungeonLevel: 0, dungeon: dungeonTypes[0] };\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import * as t from '../constants/action-types';\n\nconst initialState = {\n\thealth: 100,\n\txp: 100,\n\tgold: 0,\n\tcurrency: {\n\t\tgold: 0,\n\t\tsilver: 0,\n\t\tcopper: 500\n\t},\n\tweapon: {\n\t\tname: 'Fist',\n\t\tdamage: 100\n\t},\n\tshield: {\n\t\tname: 'Pants',\n\t\tprotection: 1\n\t},\n\texamining: {\n\t\ticonClass: \"floor\",\n\t\ttitle: \"\",\n\t\taction: \"Look\",\n\t\taroundMe: \"press l to look around\",\n\t},\n\tinventory: [], // as a mechanic I want to limit the investory to 6 items\n\tnpcsAroundMe: [],\n};\n\nexport default (state = initialState, { type, payload }) => {\n\tconst currency = state.currency;\n\tswitch (type) {\n\t\tcase t.TALK_TO_NPC:\n\t\t\treturn { ...state, npcsAroundMe: payload.npcsAroundMe};\n\t\tcase t.PLAYER_BOUGHT_ITEM:\n\t\t\t\treturn { ...state, currency: payload.currency, inventory: payload.inventory};\n\t\tcase t.PLAYER_SOLD_ITEM:\n\t\t\treturn { ...state, currency: payload.currency, inventory: payload.inventory};\n\t\tcase t.ADD_GOLD:\n\t\t\treturn { ...state, currency: {...currency, gold: payload }};\n\t\tcase t.REMOVE_GOLD:\n\t\t\treturn { ...state, currency: {...currency, gold: payload }};\n\t\tcase t.ADD_SILVER:\n\t\t\treturn { ...state, currency: {...currency, silver: payload }};\n\t\tcase t.REMOVE_SILVER:\n\t\t\treturn { ...state, currency: {...currency, silver: payload }};\n\t\tcase t.ADD_COPPER:\n\t\t\treturn { ...state, currency: {...currency, copper: payload }};\n\t\tcase t.REMOVE_COPPER:\n\t\t\treturn { ...state, currency: {...currency, copper: payload }};\n\t\tcase t.ADD_WEAPON:\n\t\t\treturn { ...state, weapon: payload };\n\t\tcase t.ADD_SHIELD:\n\t\t\treturn { ...state, shield: payload };\n\t\tcase t.ADD_XP:\n\t\t\treturn { ...state, xp: state.xp + payload };\n\t\tcase t.MODIFY_HEALTH:\n\t\t\treturn { ...state, health: payload };\n\t\tcase t.RESTART:\n\t\t\treturn initialState;\n\t\tcase t.LOOK_AROUND:\n\t\t  const examining = state.examining;\n\t\t\treturn { ...state, examining: {...examining, ...payload} };\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","\n/*\nheadwinds\n\nneed to fix issue where dialog with NPC is hidden behind scoreboard\n\n*/\n\nconst headwinds = {\n  OWNER: \"headwinds\",\n  TIPS_ALONG_BOTTOM: false,\n  GAME_SHOW_TITLE: false,\n  VP_TYPE: \"full\",\n  FOG_MODE: false,\n  GAME_TITLE: \"Cabin Quest\",\n  GAME_SUBTITLE: \" explore time between city and country\",\n  GAME_URL: \"https://cabinquest.now.sh\",\n  MAX_INVENTORY_ITEMS: 6,\n  BACKEND: \"python\",\n  WORLDSET: \"cabinquest\", \n}\n\nconst peted = {\n  OWNER: \"peted\",\n  TIPS_ALONG_BOTTOM: true,\n  GAME_SHOW_TITLE: true,\n  VP_TYPE: \"contained\",\n  FOG_MODE: true,\n  GAME_TITLE: \"THE GRID\",\n  GAME_SUBTITLE: \"- Roguelike\",\n  GAME_URL: \"https://thepeted.github.io/dungeon-crawler\",\n  MAX_INVENTORY_ITEMS: 6,\n  BACKEND: \"none\",\n  WORLDSET: \"doom\", \n}\n\nconst currentConfig = headwinds;\n\nconst config = {\n  OWNER: currentConfig.OWNER,\n  VP_WIDTH_RATIO_CONTAINED: 30,\n  VP_HEIGHT_RATIO_CONTAINED: 21,\n  VP_HEIGHT_RATIO_FULL: 1,\n  VP_WIDTH_RATIO_FULL: 1,\n  FULL_GRID_RATIO_WIDTH: 24,\n  FULL_GRID_RATIO_HEIGHT: 19,\n  VP_TYPE: currentConfig.VP_TYPE, // full or contained,\n  GAME_TITLE: currentConfig.GAME_TITLE,\n  GAME_SUBTITLE: currentConfig.GAME_SUBTITLE,\n  GAME_SHOW_TITLE: currentConfig.GAME_SHOW_TITLE,\n  TIPS_ALONG_BOTTOM: currentConfig.TIPS_ALONG_BOTTOM,\n  FOG_MODE: currentConfig.FOG_MODE,\n  CURRENCY_GOLD_LABEL: \"Gold\",\n  CURRENCY_SILVER_LABEL: \"Silver\",\n  CURRENCY_COPPER_LABEL: \"Copper\",\n  GAME_URL: currentConfig.GAME_URL,\n  MAX_INVENTORY_ITEMS: currentConfig.MAX_INVENTORY_ITEMS,\n  BACKEND: currentConfig.BACKEND,\n  WORLDSET: currentConfig.WORLDSET\n}\n\nexport default config;\n","import * as t from '../constants/action-types';\nimport config from '../config.js';\n\nconst messages = [];\n\nconst initialState = {\n\tfogMode: config.FOG_MODE,\n\tmessages,\n\tshowNPCStore: false,\n};\n\nexport default (state = initialState, { type, payload }) => {\n\tswitch (type) {\n\t\tcase t.NEW_MESSAGE:\n\t\t\treturn { ...state, messages: [ ...state.messages, payload ]};\n\t\tcase t.TOGGLE_FOG_MODE:\n\t\t\treturn { ...state, fogMode: !state.fogMode };\n\t\tcase t.TOGGLE_NPC_STORE:\n\t\t\t\treturn { ...state, fogMode: !state.showNPCStore };\t\n\t\tcase t.RESTART:\n\t\t\treturn initialState;\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n","import { combineReducers } from 'redux';\nimport grid from './grid';\nimport player from './player';\nimport ui from './ui';\n\nconst rootReducer = combineReducers({ grid, player, ui });\n\nexport default rootReducer;\n","import React from 'react';\n\nexport default ({ item, handleMouseOver, handleMouseOut, handleClick  }) => {\nconsole.log(\"item render: \", item);\n\n\treturn (\n\t\t<div\n\t\t\t\t onMouseOver={handleMouseOver}\n\t\t\t\t onMouseOut={handleMouseOut}\n\t\t\t\t onClick={handleClick}\n\t\t\t\t className={item.type}\n\t\t\t\t style={{display: \"block\",\n\t\t\t\t\t\t\t\t position: \"relative\",\n\t\t\t\t\t\t\t\t border: \"1px solid #333\",\n\t\t\t\t\t\t\t\t margin: 5,\n\t\t\t\t\t\t\t\t width: 25,\n\t\t\t\t\t\t\t\t height: 25}}>\n    </div>\n\t);\n};\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Item from './inventory-item';\n\nclass Inventory extends Component {\n\tconstructor() {\n\t\tsuper();\n\n    this.state = {\n        isOpen: false\n    }\n\n\t\tthis.handleKeyPress = this.handleKeyPress.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeyPress);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeyPress);\n\t}\n\n  toggleOpen(){\n\n    const isOpen = !this.state.isOpen;\n\n    this.setState({isOpen})\n  }\n\n\thandleMouseOver(){\n\n\t}\n\n\thandleMouseOut(){\n\n\t}\n\n\thandleClick(){\n\n\t}\n\n\n\trender() {\n\t\tconst { items } = this.props;\n\t\tconst list = items.map((item, idx) => {\n\t\t\t\treturn (<Item key={idx} \n\t\t\t\t\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\t\t\t\t\thandleMouseOver={this.handleMouseOver}\n\t\t\t\t\t\t\t\t\t\t\thandleMouseOut={this.handleMouseOver}\n\t\t\t\t\t\t\t\t\t\t\thandleClick={this.handleClick}></Item>)\n\t\t})\n\n\t\treturn (\n\t\t\t<div style={{display: \"flex\", flexDirection: \"row\"}}>\n\t\t\t\t{list}\n\t\t\t</div>\n\t\t);\n\t}\n\thandleKeyPress(e) {\n    console.log(\"keyCode: \", e.keyCode);\n\t\tswitch (e.keyCode) {\n\n\t\t\tcase 73:\n\t\t\t  this.toggleOpen();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\t}\n}\n\nconst mapStateToProps = ({player}) => {\n\treturn {player};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Inventory);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\n\nclass ItemInteractions extends Component {\n\tconstructor() {\n\t\tsuper();\n\n    this.state = {\n        isOpen: false\n    }\n\n\t\tthis.handleKeyPress = this.handleKeyPress.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeyPress);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeyPress);\n\t}\n\n  toggleOpen(){\n\n    const isOpen = !this.state.isOpen;\n\n    this.setState({isOpen})\n  }\n\n\thandleMouseOver(){\n\n\t}\n\n\thandleMouseOut(){\n\n\t}\n\n\thandleEquipClick(item){\n\n\t}\n\n\thandleDiscardClick(item){\n\n\t}\n\n\thandleTradeClick(item){\n\n\t}\n\n\thandleCraftClick(item){\n\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\n\t\t\t</div>\n\t\t);\n\t}\n\thandleKeyPress(e) {\n\n\t\t// equip or discard item...\n\n    console.log(\"keyCode: \", e.keyCode);\n\t\tswitch (e.keyCode) {\n\n\t\t\tcase 73:\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\t}\n}\n\nconst mapStateToProps = ({player}) => {\n\treturn {player};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ItemInteractions);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Inventory from '../components/inventory';\nimport ItemInteractions from '../components/item-interactions';\n\nclass Backpack extends Component {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.state = {\n\t\t\titemSelected: null, \n\t\t}\n\n\t}\n\n\tcomponentDidMount() {\n\n\t}\n\n\tcomponentWillUnmount() {\n\n\t}\n\n\thandleItemSelected(){\n\n\t}\n\n\trender() {\n\t\tconst { player } = this.props;\n    console.log(\"Backpack render: \", player.inventory);\n\t\treturn (\n\t\t\t<div className=\"panel\">\n\t\t\t\t<Inventory items={player.inventory} handleItemSelected={this.handleItemSelected} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = ({player}) => {\n\treturn {player};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Backpack);\n","import _ from 'lodash';\nimport { batchActions } from 'redux-batched-actions';\nimport * as t from '../constants/action-types';\n\nfunction addGold(payload) {\n\treturn {\n\t\ttype: t.ADD_GOLD,\n\t\tpayload\n\t};\n}\n\nfunction addSilver(payload) {\n\treturn {\n\t\ttype: t.ADD_SILVER,\n\t\tpayload\n\t};\n}\n\nfunction addCopper(payload) {\n\treturn {\n\t\ttype: t.ADD_COPPER,\n\t\tpayload\n\t};\n}\n\nfunction removeGold(payload) {\n\treturn {\n\t\ttype: t.REMOVE_GOLD,\n\t\tpayload\n\t};\n}\n\nfunction removeSilver(payload) {\n\treturn {\n\t\ttype: t.REMOVE_SILVER,\n\t\tpayload\n\t};\n}\n\nfunction removeCopper(payload) {\n\treturn {\n\t\ttype: t.REMOVE_COPPER,\n\t\tpayload\n\t};\n}\n\nexport function addCurrency(player, entity){\n\tswitch(entity.level) {\n\t\tcase 1 :\n\t\t\treturn addCopper(10 + player.currency.copper);\n\t\tcase 2 :\n\t\t\taddCopper(10 + player.currency.copper);\n\t\t\treturn addSilver(1 + player.currency.silver);\n\t\tcase 2 :\n\t\t\taddCopper(100 + player.currency.copper);\n\t\t\treturn addSilver(5 + player.currency.silver);\n\t\tcase 3 :\n\t\t\taddCopper(25 + player.currency.copper);\n\t\t\treturn addSilver(10 + player.currency.silver);\n\t\tcase 4 :\n\t\t\taddCopper(5 + player.currency.copper);\n\t\t\taddSilver(100 + player.currency.silver);\n\t\t\treturn addGold(1 + player.currency.gold);\n\t\tdefault :\n\t\t\treturn addCopper(10 + player.currency.copper);\n\t}\n\n}\n\nexport function removeCurrency(player, entity){\n\n}\n","import config from '../config.js';\n\nconst width = (config.VP_TYPE === \"full\") ? Math.floor(window.innerWidth / config.FULL_GRID_RATIO_WIDTH) : 80; //(config.VP_TYPE === \"full\") ? 100 : 80;\nconst height = (config.VP_TYPE === \"full\") ? Math.floor(window.innerHeight / config.FULL_GRID_RATIO_HEIGHT) : 60;\n\nexport const GRID_WIDTH = width;\nexport const GRID_HEIGHT = height;\nexport const MAX_ROOMS = (config.VP_TYPE === \"full\") ? 25 : 15;\nexport const ROOM_SIZE_RANGE = [7, 12];\nexport const CELL_SIZE = 10; // not used yet...\n","import _ from 'lodash';\nimport * as c from '../constants/settings';\n\nexport default () => {\n\t// HELPER FUNCTIONS FOR CREATING THE MAP\n\tconst isValidRoomPlacement = (grid, {x, y, width = 1, height = 1}) => {\n\t\t// check if on the edge of or outside of the grid\n\t\tif (y < 1 || y + height > grid.length - 1) {\n\t\t\treturn false;\n\t\t}\n\t\tif (x < 1 || x + width > grid[0].length - 1) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// check if on or adjacent to existing room\n\t\tfor (let i = y - 1; i < y + height + 1; i++) {\n\t\t\tfor (let j = x - 1; j < x + width + 1; j++) {\n\t\t\t\tif (grid[i][j].type === 'floor') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// all grid cells are clear\n\t\treturn true;\n\t};\n\n\tconst placeCells = (grid, {x, y, width = 1, height = 1}, type = 'floor') => {\n\t\tfor (let i = y; i < y + height; i++) {\n\t\t\tfor (let j = x; j < x + width; j++) {\n\t\t\t\tgrid[i][j] = {type};\n\t\t\t}\n\t\t}\n\t\treturn grid;\n\t};\n\n\tconst createRoomsFromSeed = (grid, {x, y, width, height}, range = c.ROOM_SIZE_RANGE) => {\n\t\t// range for generating the random room heights and widths\n\t\tconst [min, max] = range;\n\n\t\t// generate room values for each edge of the seed room\n\t\tconst roomValues = [];\n\n\t\tconst north = { height: _.random(min, max), width: _.random(min, max) };\n\t\tnorth.x = _.random(x, x + width - 1);\n\t\tnorth.y = y - north.height - 1;\n\t\tnorth.doorx = _.random(north.x, (Math.min(north.x + north.width, x + width)) - 1);\n\t\tnorth.doory = y - 1;\n\t\troomValues.push(north);\n\n\t\tconst east = { height: _.random(min, max), width: _.random(min, max) };\n\t\teast.x = x + width + 1;\n\t\teast.y = _.random(y, height + y - 1);\n\t\teast.doorx = east.x - 1;\n\t\teast.doory = _.random(east.y, (Math.min(east.y + east.height, y + height)) - 1);\n\t\troomValues.push(east);\n\n\t\tconst south = { height: _.random(min, max), width: _.random(min, max) };\n\t\tsouth.x = _.random(x, width + x - 1);\n\t\tsouth.y = y + height + 1;\n\t\tsouth.doorx = _.random(south.x, (Math.min(south.x + south.width, x + width)) - 1);\n\t\tsouth.doory = y + height;\n\t\troomValues.push(south);\n\n\t\tconst west = { height: _.random(min, max), width: _.random(min, max) };\n\t\twest.x = x - west.width - 1;\n\t\twest.y = _.random(y, height + y - 1);\n\t\twest.doorx = x - 1;\n\t\twest.doory = _.random(west.y, (Math.min(west.y + west.height, y + height)) - 1);\n\t\troomValues.push(west);\n\n\t\tconst placedRooms = [];\n\t\troomValues.forEach(room => {\n\t\t\tif (isValidRoomPlacement(grid, room)) {\n\t\t\t\t// place room\n\t\t\t\tgrid = placeCells(grid, room);\n\t\t\t\t// place door\n\t\t\t\tgrid = placeCells(grid, {x: room.doorx, y: room.doory}, 'door');\n\t\t\t\t// need placed room values for the next seeds\n\t\t\t\tplacedRooms.push(room);\n\t\t\t}\n\t\t});\n\t\treturn {grid, placedRooms};\n\t};\n\n\t// BUILD OUT THE MAP\n\n\t// 1. make a grid of 'empty' cells, with a random opacity value (for styling)\n\tlet grid = [];\n\tfor (let i = 0; i < c.GRID_HEIGHT; i++) {\n\t\tgrid.push([]);\n\t\tfor (let j = 0; j < c.GRID_WIDTH; j++) {\n\t\t\tgrid[i].push({type: 0, opacity: _.random(0.3, 0.8)});\n\t\t}\n\t}\n\n\t// 2. random values for the first room\n\tconst [min, max] = c.ROOM_SIZE_RANGE;\n\tconst firstRoom = {\n\t\tx: _.random(1, c.GRID_WIDTH - max - 15),\n\t\ty: _.random(1, c.GRID_HEIGHT - max - 15),\n\t\theight: _.random(min, max),\n\t\twidth: _.random(min, max)\n\t};\n\n\t// 3. place the first room on to grid\n\tgrid = placeCells(grid, firstRoom);\n\n\t// 4. using the first room as a seed, recursivley add rooms to the grid\n\tconst growMap = (grid, seedRooms, counter = 1, maxRooms = c.MAX_ROOMS) => {\n\t\tif (counter + seedRooms.length > maxRooms || !seedRooms.length) {\n\t\t\treturn grid;\n\t\t}\n\n\t\tgrid = createRoomsFromSeed(grid, seedRooms.pop());\n\t\tseedRooms.push(...grid.placedRooms);\n\t\tcounter += grid.placedRooms.length;\n\t\treturn growMap(grid.grid, seedRooms, counter);\n\t};\n\treturn growMap(grid, [firstRoom]);\n};\n","const weaponTypes = [\n  {\n    name: 'Big Stick',\n    damage: 10\n  },\n  {\n    name: 'Club',\n    damage: 15\n  },\n  {\n    name: 'Rusty Sword',\n    damage: 20\n  },\n  {\n    name: 'Butcher Knife',\n    damage: 25\n  },\n  {\n    name: 'Mace',\n    damage: 30\n  },\n  {\n    name: 'Flail',\n    damage: 35\n  },\n  {\n    name: 'Long Sword',\n    damage: 40\n  },\n  {\n    name: 'Broad Sword',\n    damage: 50\n  }\n];\n\nexport default weaponTypes;\n","const shieldTypes = [\n  {\n    name: 'Hat',\n    protection: 1,\n    type: 'shield',\n  },\n  {\n    name: 'Bracers',\n    protection: 5,\n    type: 'shield',\n  },\n  {\n    name: 'Rusty Shield',\n    protection: 10,\n    type: 'shield',\n  },\n  {\n    name: 'Wooden Shield',\n    protection: 12,\n    type: 'shield',\n  },\n  {\n    name: 'Leather Shield',\n    protection: 20,\n    type: 'shield',\n  },\n  {\n    name: 'Chain Shield',\n    protection: 25,\n    type: 'shield',\n  },\n  {\n    name: 'Plate Shield',\n    protection: 40,\n    type: 'shield',\n  },\n  {\n    name: 'Elven Shield',\n    protection: 50,\n    type: 'shield',\n  }\n];\n\nexport default shieldTypes;\n","// actors should be imported\n\nconst enemy = {\n  type: \"enemy\",\n  name: \"\",\n  health: 100,\n  weapon: \"\",\n  armour: \"\",\n  speed: 10,\n  accuracy: 10,\n  level: 1\n}\n\nconst enemyTypes = {\n  1:\"Rat\",\n  2:\"Kobold\",\n  3:\"Dark Elf\",\n  4:\"Troll\",\n  5:\"Boss\"\n}\n\nexport default enemyTypes;\n","// actors should be imported\n\nconst neutralType = {\n  type: \"neutral\",\n  name: \"\",\n  health: 100,\n  weapon: \"\",\n  armour: \"\",\n  speed: 10,\n  accuracy: 10,\n  treaure: []\n}\n\nconst neutralCreatures = [\n  {\n    type: \"neutral\",\n    name: \"Jack Rabbit\",\n    health: 5,\n    weapon: {name: \"teeth\", protection: 1},\n    armour: {name: \"fur\", protection: 10},\n    speed: 1,\n    accuracy: 1,\n    treaure: [{name: \"pelt\", cost: {gold: 0, silver: 0, copper: 5}}]\n  },\n  {\n    type: \"neutral\",\n    name: \"Cariboo\",\n    health: 25,\n    weapon: {name: \"horns\", damage: 100},\n    armour: {name: \"fur\", protection: 10},\n    speed: 10,\n    accuracy: 10,\n    treaure: [{name: \"hide\", cost: {gold: 0, silver: 0, copper: 25}}]\n  },\n  {\n    type: \"neutral\",\n    name: \"Buffalo\",\n    health: 1225,\n    weapon: {name: \"horns\", damage: 100},\n    armour: {name: \"fur\", protection: 1},\n    speed: 10,\n    accuracy: 100,\n    treaure: [{name: \"hide\", cost: {gold: 1, silver: 10, copper: 25}}]\n  }\n]\n\nexport default neutralCreatures;\n","import weaponTypes from './weaponTypes';\nimport shieldTypes from './shieldTypes';\nimport potionTypes from './potionTypes';\n\nconst defaultItems = [\n\t{name: \"sword\", cost: 30, cost: { gold: 0, silver: 0, copper: 30}, type: \"weapon\"},\n\t{name: \"health potion\", cost: { gold: 0, silver: 0, copper: 30}, type: \"potion\"},\n\t{name: \"shield\", cost: 30, cost: { gold: 0, silver: 0, copper: 30}, type: \"shield\"},\n]\n\nconst npcTypes = [\n  {\n    name: 'Alspen',\n    description: '',\n    profession: 'Trader',\n    inventory: defaultItems,\n    type: 'npc',\n    portrait: '',\n    selected: false,\n    greetings: [\"I have the best deals.\"]\n  },\n];\n\nexport default npcTypes;\n","import _ from 'lodash';\nimport * as c from '../constants/settings';\nimport weaponTypes from '../types/weaponTypes';\nimport shieldTypes from '../types/shieldTypes';\nimport enemyTypes from '../types/enemyTypes';\nimport neutralTypes from '../types/neutralTypes';\nimport npcTypes from '../types/npcTypes';\n\nexport default (gameMap, gameWorldSeq, level = 1) => {\n\t// 1. create the entities\n\tconst bosses = [];\n\tif (level === 4) {\n\t\tbosses.push({\n\t\t\thealth: 400,\n\t\t\tlevel: 5,\n\t\t\ttype: 'boss'\n\t\t});\n\t}\n\n\tconst npcTrader = npcTypes.filter( npc => npc.profession.toLowerCase() === \"trader\")[0];\n\tconst npcs = [];\n\tfor (let i = 0; i < 30; i++) {\n\t\tnpcs.push({...npcTrader}); // if you don't use spread, it will create an immutable tile and the distance calc will fail\n\t}\n\n\tconst enemies = [];\n\tfor (let i = 0; i < 7; i++) {\n\t\tenemies.push({\n\t\t\thealth: level * 30 + 40,\n\t\t\t// half of the enememies will be a level higher or lower (except on\n\t\t\t// level 1, where ~1/4 enemies are a level higher)\n\t\t\tlevel: _.random(level, _.random(level - 1 ? level - 1 : level, level + 1)),\n\t\t\ttype: 'enemy',\n\t\t\tname: enemyTypes[level]\n\t\t});\n\t}\n\n\t// not enemies but will attack if attacked \n\t// animals like deer can be farmed  \n\t// but should be able pass by any neutral without combat \n\tconst neutral = [];\n\tfor (let i = 0; i < 7; i++) {\n\t\tneutral.push({\n\t\t\thealth: level * 30 + 40,\n\t\t\t// half of the enememies will be a level higher or lower (except on\n\t\t\t// level 1, where ~1/4 enemies are a level higher)\n\t\t\tlevel: _.random(level, _.random(level - 1 ? level - 1 : level, level + 1)),\n\t\t\ttype: 'neutral',\n\t\t\tname: neutralTypes[level]\n\t\t});\n\t}\n\n\tconst exits = [];\n\tif (level < 4) {\n\t\texits.push({\n\t\t\ttype: 'exit'\n\t\t});\n\t}\n\n\tconst players = [\n\t\t{\n\t\t\ttype: 'player'\n\t\t}\n\t];\n\n\tconst potionArr = gameWorldSeq.get(\"itemSet\").filter( item => item.type === \"potion\" );\t\n\tconst healthPotionObj = potionArr.filter( potion => potion.modifies === \"health\")[0];\n\t\n\tconst potions = [];\n\tfor (let i = 0; i < 5; i++) {\n\t\tpotions.push({...healthPotionObj});\n\t}\n\n\tconst foodArr = gameWorldSeq.get(\"itemSet\").filter( item => item.type === \"food\" );\t\n\tconst mushroomObj = foodArr.filter( food => food.name === \"mushroom\")[0];\n\t\n\tconst mushrooms = [];\n\tfor (let i = 0; i < 5; i++) {\n\t\tmushrooms.push({...mushroomObj});\n\t}\n\n\tconst weapons = [];\n\t// weapon types will vary based on the level passed to the parent function\n\tconst qualifyingWeapons = weaponTypes\n\t\t.filter(weapon => weapon.damage < level * 10 + 10)\n\t\t\t.filter(weapon => weapon.damage > level * 10 - 10);\n\tfor (let i = 0; i < 3; i++) {\n\t\tconst weapon = Object.assign({}, qualifyingWeapons[_.random(0, qualifyingWeapons.length - 1)]);\n\t\tweapon.type = 'weapon';\n\t\tweapons.push(weapon);\n\t}\n\n\tconst shields = [];\n\t// shields act like weapons except add protection instead of damage\n\tconst qualifyingShields = shieldTypes\n\t\t.filter(shield => shield.protection < level * 10 + 10)\n\t\t\t.filter(shield => shield.protection > level * 10 - 10);\n\tfor (let i = 0; i < 3; i++) {\n\t\tconst shield = Object.assign({}, qualifyingShields[_.random(0, qualifyingShields.length - 1)]);\n\t\tshield.type = 'shield';\n\t\tshields.push(shield);\n\t}\n\n\t// 2. randomly place all the entities on to floor cells on the game map.\n\n\t// we'll need to return the players starting co-ordinates\n\tlet playerPosition = [];\n\t[\tpotions,\n\t\tmushrooms,\n\t\tenemies,\n\t\tneutral,\n\t\tweapons,\n\t\tshields,\n\t\texits,\n\t\tplayers,\n\t\tnpcs,\n\t\tbosses].forEach(entities => {\n\t\twhile (entities.length) {\n\t\t\tconst x = Math.floor(Math.random() * c.GRID_WIDTH);\n\t\t\tconst y = Math.floor(Math.random() * c.GRID_HEIGHT);\n\t\t\tif (gameMap[y][x].type === 'floor') {\n\t\t\t\tif (entities[0].type === 'player') {\n\t\t\t\t\tplayerPosition = [x, y];\n\t\t\t\t}\n\t\t\t\tgameMap[y][x] = entities.pop();\n\t\t\t}\n\t\t}\n\t});\n\n\t// 3. we can now replace doors with floors\n\t// what do doors look like? do they need keys? do they hide what's behind them?!\n\t// So they don't hide the contents behind them and they act like potions meaning they disappear when crossed.\n\t// we should implement doors that hide the things inside when closed and some doors should be locked requiring the right key\n\tfor (let i = 0; i < gameMap.length; i++) {\n\t\tfor (let j = 0; j < gameMap[0].length; j++) {\n\t\t\tif (gameMap[i][j].type === 'door') {\n\t\t\t \tgameMap[i][j].type = 'floor';\n\t\t\t}\n\t\t}\n\t}\n\treturn {entities: gameMap, playerPosition};\n};\n","import {Record} from \"immutable\";\n\nconst ItemModel = Record({\n  name: 'generic item',\n  modifies: \"health\",\n  by: 10,\n  type: 'item',\n});\n\nexport default ItemModel;","import {Record} from \"immutable\";\n\n/*\nhttps://twitter.com/kurtruslfanclub/status/1088023995612520449\n Desired Player Behaviour\n Appearance Rule\n Surprise Structure\n Defeat Requirements\n Alert Rules\n When to fight / to take flight\n*/\n\nconst EnemyModel = Record({\n    type: \"enemy\",\n    name: \"\",\n    health: 100,\n    weapon: \"\",\n    armour: \"\",\n    speed: 10,\n    accuracy: 10,\n});\n\nexport default EnemyModel;","import {Record} from \"immutable\";\n\nconst WorldModel = Record({\n  itemSet: [],\n  enemySet: [],\n  neutralSet: [],\n  npcSet: [],\n  shieldSet: [],\n  weaponSet: [],\n  type: 'worldset',\n});\n\nexport default WorldModel;\n","import {Record} from \"immutable\";\n\nconst WeaponModel = Record({\n  name: 'generic item',\n  modifies: \"none\",\n  by: 0,\n  type: 'weapon',\n  damage: 10,\n});\n\nexport default WeaponModel;","import {Set, Seq} from \"immutable\";\n\nimport ItemModel from \"../../models/ItemModel\";\nimport EnemyModel from \"../../models/EnemyModel\";\nimport WeaponModel from \"../../models/WeaponModel\";\nimport WorldModel from \"../../models/WorldModel\";\n\n// ITEMS\n\n\nconst potionItem = new ItemModel({\n  name: 'Health Potion',\n  modifies: \"health\",\n  by: 10,\n  type: 'potion',\n})  \n\nconst mushroomItem = new ItemModel({\n  name: 'mushroom',\n  modifies: \"health\",\n  by: 10,\n  type: 'food',\n})\n\nconst itemSet = new Set([mushroomItem, potionItem]);\n\n// ENEMIES\n\nconst ratEnemy = new EnemyModel({\n  name: \"Rat\",\n  health: 10,\n  weapon: \"teeth\",\n  armour: \"fur\",\n  speed: 10,\n  accuracy: 10,\n  level: 1\n})\n\nconst koboldEnemy = new EnemyModel({\n  name: \"Kolbold\",\n  health: 10,\n  weapon: \"teeth\",\n  armour: \"fur\",\n  speed: 10,\n  accuracy: 10,\n  level: 1\n})\n\nconst darkElfEnemy = new EnemyModel({\n  name: \"Dark Elf\",\n  health: 10,\n  weapon: \"teeth\",\n  armour: \"fur\",\n  speed: 10,\n  accuracy: 10,\n  level: 1\n})\n\nconst bossEnemy = new EnemyModel({\n  name: \"Boss\",\n  health: 10,\n  weapon: \"teeth\",\n  armour: \"fur\",\n  speed: 10,\n  accuracy: 10,\n  level: 1\n})\n\nconst enemySet = new Set([ratEnemy, koboldEnemy, darkElfEnemy, bossEnemy]);\n\n// NEUTRALS\n\nconst neutralSet = new Set([mushroomItem]);\n\n// NPCS\n\nconst npcSet = new Set([mushroomItem]);\n\n// SHIELDS\n\nconst shieldTypes = [\n  {\n    name: 'Hat',\n    protection: 1,\n    type: 'shield',\n  },\n  {\n    name: 'Bracers',\n    protection: 5,\n    type: 'shield',\n  },\n  {\n    name: 'Rusty Shield',\n    protection: 10,\n    type: 'shield',\n  },\n  {\n    name: 'Wooden Shield',\n    protection: 12,\n    type: 'shield',\n  },\n  {\n    name: 'Leather Shield',\n    protection: 20,\n    type: 'shield',\n  },\n  {\n    name: 'Chain Shield',\n    protection: 25,\n    type: 'shield',\n  },\n  {\n    name: 'Plate Shield',\n    protection: 40,\n    type: 'shield',\n  },\n  {\n    name: 'Elven Shield',\n    protection: 50,\n    type: 'shield',\n  }\n];\n\nconst shieldSet = new Set([mushroomItem]);\n\n// WEAPONS\n\nconst weaponTypes = [\n  {\n    name: 'Big Stick',\n    damage: 10\n  },\n  {\n    name: 'Club',\n    damage: 15\n  },\n  {\n    name: 'Rusty Sword',\n    damage: 20\n  },\n  {\n    name: 'Butcher Knife',\n    damage: 25\n  },\n  {\n    name: 'Mace',\n    damage: 30\n  },\n  {\n    name: 'Flail',\n    damage: 35\n  },\n  {\n    name: 'Long Sword',\n    damage: 40\n  },\n  {\n    name: 'Broad Sword',\n    damage: 50\n  }\n];\n\nconst weaponSet = new Set([mushroomItem]);\n\nconst world = new WorldModel(\n    {itemSet,\n    enemySet,\n    neutralSet,\n    npcSet,\n    shieldSet,\n    weaponSet})\n\nconst commonSeq = new Seq(world.toJS());\n\nexport default commonSeq;","import _ from 'lodash';\nimport { batchActions } from 'redux-batched-actions';\nimport { addCurrency, removeCurrency } from './currency';\nimport createMap from '../bin/game-map-creator';\nimport populateEntities from '../bin/entity-creator';\nimport * as t from '../constants/action-types';\nimport config from '../config.js';\nimport worldsets from '../worldsets/worldsets';\n\nconst gameWorldSeq = worldsets[config.OWNER];\n\nfunction addShield(payload) {\n\treturn {\n\t\ttype: t.ADD_SHIELD,\n\t\tpayload\n\t};\n}\n\nfunction removeShield(payload) {\n\treturn {\n\t\ttype: t.REMOVE_SHIELD,\n\t\tpayload\n\t};\n}\n\nfunction addWeapon(payload) {\n\treturn {\n\t\ttype: t.ADD_WEAPON,\n\t\tpayload\n\t};\n}\n\nfunction removeWeapon(payload) {\n\treturn {\n\t\ttype: t.REMOVE_WEAPON,\n\t\tpayload\n\t};\n}\n\nfunction addXP(payload) {\n\treturn {\n\t\ttype: t.ADD_XP,\n\t\tpayload\n\t};\n}\n\nfunction changeEntity(entity, coords) {\n\treturn {\n\t\ttype: t.CHANGE_ENTITY,\n\t\tpayload: { entity, coords }\n\t};\n}\n\nfunction changePlayerPosition(payload) {\n\treturn {\n\t\ttype: t.CHANGE_PLAYER_POSITION,\n\t\tpayload\n\t};\n}\n\nexport function createLevel(level) {\n\treturn {\n\t\ttype: t.CREATE_LEVEL,\n\t\tpayload: populateEntities(createMap(), gameWorldSeq, level)\n\t};\n}\n\nfunction modifyHealth(payload) {\n\treturn {\n\t\ttype: t.MODIFY_HEALTH,\n\t\tpayload\n\t};\n}\n\nexport function newMessage(payload) {\n\treturn {\n\t\ttype: t.NEW_MESSAGE,\n\t\tpayload\n\t};\n}\n\nexport function restart() {\n\treturn {\n\t\ttype: t.RESTART\n\t};\n}\n\nexport function updateDungeon(payload) {\n\treturn {\n\t\ttype: t.UPDATE_DUNGEON,\n\t\tpayload\n\t};\n}\n\nexport function setDungeonLevel(level, transit) {\n\treturn {\n\t\ttype: t.SET_DUNGEON_LEVEL,\n\t\tpayload: {\n\t\t\tlevel,\n\t\t\ttransit\n\t\t}\n\t};\n}\n\nexport function setEndGame(payload) {\n\treturn {\n\t\ttype: t.SET_END_GAME,\n\t\tpayload\n\t};\n}\n\nexport function resetDungeon() {\n\treturn {\n\t\ttype: t.RESET_DUNGEON\n\t};\n}\n\nexport function toggleFogMode() {\n\treturn {\n\t\ttype: t.TOGGLE_FOG_MODE\n\t};\n}\n\n// a thunk!\nexport default (vector) => {\n\treturn (dispatch, getState) => {\n\t\tconst { grid, player } = getState();\n\n\t\t// cache some useful variables\n\t\tconst [ x, y ] = grid.playerPosition.slice(0); // get current location\n\t\tconst [ vectorX, vectorY ] = vector; // get direction modifier\n\t\tconst newPosition = [vectorX + x, vectorY + y]; // define where we're moving to\n\t\tconst newPlayer = grid.entities[y][x];\n\t\tconst destination = grid.entities[y + vectorY][x + vectorX]; // whats in the cell we're heading to\n\t\t// store the actions in array to be past to batchActions\n\t\tconst actions = [];\n\n\t\t// move the player unless destination is an enemy or permanent fixture like a wall (cell 0) or building\n\t\tif (destination.type\n\t\t\t\t&& destination.type !== 'enemy'\n\t\t\t\t\t&& destination.type !== 'boss') {\n\n\t\t\t// players should be able to pass through npcs but we don't want to remove them from the game\n\n\t\t\tif (destination.type === 'npc') {\n\t\t\t\tactions.push(\n\t\t\t\t\tchangeEntity({ ...destination }, [x, y]),\n\t\t\t\t\tchangeEntity(newPlayer, newPosition),\n\t\t\t\t\tchangePlayerPosition(newPosition)\n\t\t\t\t);\n\t\t\t}\telse {\n\t\t\t\tactions.push(\n\t\t\t\t\tchangeEntity({ type: 'floor' }, [x, y]),\n\t\t\t\t\tchangeEntity(newPlayer, newPosition),\n\t\t\t\t\tchangePlayerPosition(newPosition)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tswitch (destination.type) {\n\t\t\tcase 'boss':\n\t\t\tcase 'enemy': {\n\t\t\t\tconst playerLevel = Math.floor(player.xp / 100);\n\t\t\t\t// player attacks enemy\n\t\t\t\tconst enemyDamageTaken = Math.floor(player.weapon.damage * _.random(1, 1.3) * playerLevel);\n\t\t\t\tdestination.health -= enemyDamageTaken;\n\n\t\t\t\tif (destination.health > 0) {\n\t\t\t\t\t// enemy attacks player\n\t\t\t\t\tconst playerDamageTaken = Math.floor(_.random(4, 7) * destination.level) - player.shield.protection;\n\n\t\t\t\t\tactions.push(\n\t\t\t\t\t\tchangeEntity(destination, newPosition),\n\t\t\t\t\t\tmodifyHealth(player.health - playerDamageTaken),\n\t\t\t\t\t\tnewMessage(`FIGHT! You hurt the enemy with attack of [${enemyDamageTaken}].\tThe enemy hits back with an attack of [${playerDamageTaken}].  Enemy has [${destination.health}] health remaining.`)\n\t\t\t\t\t);\n\n\t\t\t\t\tif (player.health - playerDamageTaken <= 0) {\n\t\t\t\t\t\t// player dies\n\t\t\t\t\t\tdispatch(modifyHealth(0));\n\t\t\t\t\t\tsetTimeout(() => dispatch(setEndGame('death')), 250);\n\t\t\t\t\t\tsetTimeout(() => dispatch(newMessage(`YOU DIED`)),\n\t\t\t\t\t\t1000);\n\t\t\t\t\t\tsetTimeout(() => dispatch(newMessage(`Everything goes dark..`)),\n\t\t\t\t\t\t2000);\n\t\t\t\t\t\tsetTimeout(() => dispatch(newMessage(`You resolve to try harder next time`)),\n\t\t\t\t\t\t4000);\n\t\t\t\t\t\tsetTimeout(() => dispatch(newMessage(`The grid resets itself....`)),\n\t\t\t\t\t\t6000);\n\t\t\t\t\t\tsetTimeout(() => dispatch(batchActions([\n\t\t\t\t\t\t\trestart(), createLevel(1), resetDungeon()\n\t\t\t\t\t\t])),\n\t\t\t\t\t\t8000);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (destination.health <= 0) {\n\t\t\t\t\t// the fight is over and the player has won\n\t\t\t\t\t// add XP and move the player\n\t\t\t\t\tif (destination.type === 'boss') {\n\t\t\t\t\t\tactions.push(\n\t\t\t\t\t\t\taddXP(10 * destination.level),\n\t\t\t\t\t\t\taddCurrency(player, destination),\n\t\t\t\t\t\t\tchangeEntity({ type: 'floor'}, [x, y]),\n\t\t\t\t\t\t\tchangeEntity(newPlayer, newPosition),\n\t\t\t\t\t\t\tchangePlayerPosition(newPosition),\n\t\t\t\t\t\t\tnewMessage(`VICTORY! Your attack of [${enemyDamageTaken}] is too powerful for the enemy, who dissolves before your very eyes.`)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetTimeout(() => dispatch(setEndGame('victory')), 250);\n\t\t\t\t\t\tsetTimeout(() => dispatch(newMessage(`YOU DEFATED THE BOSS!`)),\n\t\t\t\t\t\t1000);\n\t\t\t\t\t\tsetTimeout(() => dispatch(newMessage(`The BOSS emits an almighty scream`)),\n\t\t\t\t\t\t2000);\n\t\t\t\t\t\tsetTimeout(() => dispatch(newMessage(`You bask momentarily in your glory`)),\n\t\t\t\t\t\t4000);\n\t\t\t\t\t\tsetTimeout(() => dispatch(newMessage(`The grid resets itself....`)),\n\t\t\t\t\t\t6000);\n\t\t\t\t\t\tsetTimeout(() => dispatch(batchActions([\n\t\t\t\t\t\t\trestart(), createLevel(1), resetDungeon()\n\t\t\t\t\t\t])),\n\t\t\t\t\t\t8000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tactions.push(\n\t\t\t\t\t\t\taddXP(10 * destination.level),\n\t\t\t\t\t\t\taddCurrency(player, destination),\n\t\t\t\t\t\t\tchangeEntity({ type: 'floor'}, [x, y]),\n\t\t\t\t\t\t\tchangeEntity(newPlayer, newPosition),\n\t\t\t\t\t\t\tchangePlayerPosition(newPosition),\n\t\t\t\t\t\t\tnewMessage(`VICTORY! Your attack of [${enemyDamageTaken}] is too powerful for the enemy, who dissolves before your very eyes.`)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsetTimeout(() => dispatch(newMessage(`You gain 10XP and feel yourself growing stronger..`)),\n\t\t\t\t\t\t2500);\n\t\t\t\t\t\tif ((player.xp + 10) % 100 === 0) {\n\t\t\t\t\t\t\tsetTimeout(() => dispatch(newMessage(`LEVEL UP!`)), 5000);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'exit':\n\n\t\t\t\tif (grid.dungeon.exitsComplete === grid.dungeon.exits) {\n\t\t\t\t\tsetTimeout(() => dispatch(batchActions([\n\t\t\t\t\t\tsetDungeonLevel(grid.dungeonLevel + 1, grid.dungeonLevel + 1),\n\t\t\t\t\t\tcreateLevel(grid.dungeonLevel + 1)\n\t\t\t\t\t])), 3000);\n\t\t\t\t\tactions.push(\n\t\t\t\t\t\tnewMessage(`The cells start to shift... you transit to zone ${grid.dungeonLevel + 1}`)\n\t\t\t\t\t);\n\t\t\t\t\t//do I need this? the transit part causes a bug in the HUD\n\t\t\t\t\tsetTimeout(() => dispatch(setDungeonLevel(grid.dungeonLevel + 1, `transit-${grid.dungeonLevel + 1}`)), 250);\n\t\t\t\t} else {\n\t\t\t\t\tconst oldDungeon = grid.dungeon;\n\t\t\t\t\tconst newDungeonState = {...oldDungeon, exitsComplete: oldDungeon.exitsComplete + 1}\n\n\t\t\t\t\tactions.push(\n\t\t\t\t\t\tnewMessage(`You enter the tunnel and pass into the next zone`)\n\t\t\t\t\t);\n\n\t\t\t\t\tsetTimeout(() => dispatch(batchActions([\n\t\t\t\t\t\tupdateDungeon(newDungeonState),\n\t\t\t\t\t\tcreateLevel(grid.dungeonLevel)\n\t\t\t\t\t])), 250);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'potion':\n\n\t\t\t\t if (destination.modifies === \"health\") {\n\t\t\t\t\t actions.push(\n\t \t\t\t\t\tmodifyHealth(player.health + destination.by),\n\t \t\t\t\t\tnewMessage(`You drink a potion for ${destination.by} ${destination.modifies}`)\n\t \t\t\t\t);\n\t\t\t\t }\n\n\t\t\t\tbreak;\n\t\t\tcase 'food':\n\n\t\t\t\tif (destination.modifies === \"health\") {\n\t\t\t\t\tactions.push(\n\t\t\t\t\t\tmodifyHealth(player.health + destination.by),\n\t\t\t\t\t\tnewMessage(`You eat a ${destination.name} for ${destination.by} ${destination.modifies}`)\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t   break;\t\n\t\t\tcase 'weapon':\n\t\t\t\tactions.push(\n\t\t\t\t\taddWeapon(destination),\n\t\t\t\t\tnewMessage(`You pick up a ${destination.name}`)\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'shield':\n\t\t\t\tactions.push(\n\t\t\t\t\taddShield(destination),\n\t\t\t\t\tnewMessage(`You pick up a ${destination.name}`)\n\t\t\t\t);\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tdispatch(batchActions(actions));\n\t};\n};\n\nexport function openingMessages() {\n\treturn (dispatch) => {\n\t\tdispatch(newMessage(`Welcome to The Grid...`));\n\t\tsetTimeout(() => {\n\t\t\tdispatch(newMessage(`You find yourself in a world filled with strange cells`));\n\t\t}, 3000);\n\t\tsetTimeout(() => {\n\t\t\tdispatch(newMessage(`'Hmm... there must be a way out of here..'`));\n\t\t}, 6000);\n\t};\n}\n\nexport function restartGame() {\n\treturn (dispatch) => {\n\t\tdispatch(newMessage(`The grid resets itself....`));\n\t\tsetTimeout(() => dispatch(batchActions([\n\t\t\trestart(), createLevel(1), resetDungeon()\n\t\t])),\n\t\t1000);\n\t};\n}\n","import cabinQuestSeq from './cabinquest/cabinQuestSeq';\nimport doomSeq from './doom/doomSeq';\n\nconst worldsets = {\n    \"headwinds\": cabinQuestSeq,\n    \"peted\": doomSeq\n}\n\nexport default worldsets;","import React from 'react';\n\nexport default ({ cell, distance, visible, zone, transit }) => {\n\tlet opacityValue = cell.opacity;\n\tif (visible && distance > 10) {\n\t\topacityValue = 0;\n\t} else if (cell.type !== 0) {\n\t\topacityValue = 1;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={cell.type ? `${cell.type} cell` : `back-${transit} cell`}\n\t\t\tstyle={{opacity: opacityValue}}\n\t\t\t/>\n\t);\n};\n","export function getCreditsAsCopper(player) {\n\n  console.log(\"getCreditsAsCopper \", player);\n\n  const goldAsCopper = player.currency.gold * 100;\n  const silverAsCopper = player.currency.silver * 10;\n\n  return goldAsCopper + silverAsCopper + player.currency.copper;\n}\n\nexport function displayCost(item) {\n\n  if (item.cost.gold === 0) {\n\n    if (item.cost.copper === 0)  {\n      return \"$\" + item.cost.silver + \" silver\";\n    } else {\n      return \"$\" + item.cost.silver + \" silver \" + item.cost.copper + \" copper\";\n    }\n\n  } else if (item.cost.silver === 0) {\n     return \"$\" + item.cost.copper + \" copper\";\n  } else {\n\n    if (item.cost.silver === 0 && item.cost.copper === 0) {\n      return \"$\" + item.cost.gold + \" gold\";\n    } else if (item.cost.silver === 0) {\n      return \"$\" + item.cost.gold + \" gold \" + item.cost.copper + \" copper\";\n    } else {\n      return \"$\" + item.cost.gold + \" gold \" +\n                item.cost.silver + \" silver \" +\n                item.cost.copper + \" copper\";\n    }\n  }\n\n}\n\nexport function getPlayerCurrencyAfterBuy(newTotalCopper) {\n  // will it be weird to get back a different distribution of gold, silver, copper?!\n  const gold = Math.floor( newTotalCopper / 100);\n  const goldRemainder = newTotalCopper % 100;\n  const silver = Math.floor( goldRemainder / 10);\n  const copper = silver % 10;\n\n  return {gold, silver, copper};\n\n}\n","import _ from 'lodash';\nimport { batchActions } from 'redux-batched-actions';\nimport * as t from '../constants/action-types';\nimport { getCreditsAsCopper, displayCost, getPlayerCurrencyAfterBuy } from '../utils/currency-utils';\nimport { npcSoldItem, npcBoughtItem } from './npc';\nimport {newMessage} from './index';\nimport config from '../config.js';\n\nexport function toggleNPCStore() {\n  return {\n    type: t.TOGGLE_NPC_STORE,\n  };\n}\n\nexport function selectNPC(npc) {\n\n  /*\n  Before you can interact with an NPC, you need to select which one from those around you\n  */\n  return {\n    type: t.SELECT_NPC,\n  };\n}\n\nexport function talkToNPC(npcsAroundMe) {\n\n  /*\n  Conversation\n  when you start, a conversation the NPC Store overlay appears which:\n  1. shows the npc and conversation options\n  2. if the npc has item to exchange, it will show the store but not everyone npc has items\n  */\n\n  return {\n    type: t.TALK_TO_NPC,\n    payload: {npcsAroundMe}\n  };\n}\n\nexport function interactWithNeutral(neutralsAroundMe) {\n\n  /*\n  Conversation\n  when you start, a conversation the NPC Store overlay appears which:\n  1. shows the npc and conversation options\n  2. if the npc has item to exchange, it will show the store but not everyone npc has items\n  */\n\n  return {\n    type: t.INTERACT_WITH_NEUTRAL,\n    payload: {neutralsAroundMe}\n  };\n}\n\n\n\nexport function itemTradeSuccess() {\n  return {\n    type: t.PLAYER_TRADE_SUCCESS,\n  };\n}\n\nexport function itemTradeFail() {\n  return {\n    type: t.PLAYER_TRADE_FAIL,\n  };\n}\n\nexport function playerBoughtItem(inventory, currency) {\n  return {\n    type: t.PLAYER_BOUGHT_ITEM,\n    payload: {\n      inventory,\n      currency,\n    }\n  };\n}\n\nexport function playerSoldItem(inventory, currency) {\n  return {\n    type: t.PLAYER_SOLD_ITEM,\n    payload: {\n      inventory,\n      currency,\n    }\n  };\n}\n\n// we could add a second tradeItems function if it was a straight swap not involving currency\n// if it's one item assume it's for cash\nexport function tradeItem(item, buyer, seller) {\n\n  return (dispatch, getState) => {\n\n    const actions = [];\n\n    // do I have room for it my inventory?\n\n     console.log(\"max \", config.MAX_INVENTORY_ITEMS )\n     console.log(\"max vs\", buyer.inventory.length  )\n\n    if (buyer.inventory.length >= config.MAX_INVENTORY_ITEMS) {\n\n      actions.push(\n        itemTradeFail(),\n        newMessage(\"You have no room for it!\")\n      );\n\n      return dispatch(batchActions(actions));\n    }\n\n    // can I afford the item?\n    const myTotalCopper = getCreditsAsCopper(buyer);\n    const itemTotalCopper = getCreditsAsCopper(item);\n\n    if (myTotalCopper > itemTotalCopper) {\n\n      const newTotalCopper =  myTotalCopper - itemTotalCopper;\n      const newPlayerCurrency = getPlayerCurrencyAfterBuy(newTotalCopper);\n      const newPlayerInventory = [...buyer.inventory, item];\n\n      //this.props.buyItem(boughtItem, newPlayerCurrency)\n      actions.push(\n        npcSoldItem(seller, item), // later we could add currency to the npc - give thieves something to steal\n        playerBoughtItem(newPlayerInventory, newPlayerCurrency),\n      )\n\n      const { player } = getState();\n\n      // 6 slots\n      const newInventory = (player.inventory.length < 6) ? [...player.inventory, item] : [...player.inventory];\n\n\n\n      actions.push(\n        itemTradeSuccess(),\n        newMessage(`You bought a [${item.name}].`)\n      );\n\n    } else {\n      // can't afford it...\n      //this.setState({conversation: \"You can't afford it.\"})\n      // this.\n      const short = itemTotalCopper - myTotalCopper;\n      const message = `Rats! You can't afford it - you're short ${short} copper.`\t// ok for now but may want to show the  gold, silver, copper brreak ddown later\n\n      //this.props.newMessage(message)\n      actions.push(\n        itemTradeFail(),\n        newMessage(message) );\n\n    }\n\n\n    return dispatch(batchActions(actions));\n\n  }\n}\n","import * as t from '../constants/action-types';\n\nexport function toggleNPCStore() {\n  return {\n    type: t.TOGGLE_NPC_STORE,\n  };\n}\n\nexport function selectNPC(npc) {\n\n  /*\n  Before you can interact with an NPC, you need to select which one from those around you\n  */\n  return {\n    type: t.SELECT_NPC,\n  };\n}\n\n\nexport function npcBoughtItem(item, npc) {\n  return {\n    type: t.NPC_BOUGHT_ITEM,\n    payload: {\n      item,\n      npc,\n    }\n  };\n}\n\nexport function npcSoldItem(item, npc) {\n  return {\n    type: t.NPC_SOLD_ITEM,\n    payload: {\n      item,\n      npc,  \n    }\n  };\n}\n\nexport function npcTradedItem(item, npc) {\n  return {\n    type: t.NPC_TRADED_ITEM,\n    payload: {\n      item,\n      npc,  \n    }\n  };\n}\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport { lookAround } from '../actions/examine';\nimport { talkToNPC, interactWithNeutral } from '../actions/player';\nimport { getNPCsAroundMe } from '../utils/npc-utils';\n//import { getNeutralsAroundMe } from '../utils/npc-utils';\n\nimport Cell from '../components/cell';\n\nclass Player extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.handleKeyPress = this.handleKeyPress.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeyPress);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeyPress);\n\t}\n\n\trender() {\n\n\t\tconst {key, cell, distance, zone, transit, visible} = this.props.cellProps;\n\n\t\treturn (\n\t\t\t\t<Cell\n\t\t\t\t\tkey={key}\n\t\t\t\t\tcell={cell}\n\t\t\t\t\tdistance={distance}\n\t\t\t\t\tzone={zone}\n\t\t\t\t\ttransit={transit}\n\t\t\t\t\tvisible={visible}\n\t\t\t\t\t/>\n\t\t);\n\t}\n\thandleKeyPress(e) {\n\t\tconsole.log(\"code:\",e.keyCode)\n\t\tswitch (e.keyCode) {\n\t\t\tcase 76:\n\t\t\t\tthis.props.lookAround(this.props.grid.entities);\n\t\t\t\tbreak;\n\t\t\tcase 84:\n\t\t\t\tconst npcsAroundMe = getNPCsAroundMe(this.props.grid.entities)\n\t\t\t\tif ( npcsAroundMe.length > 0) this.props.talkToNPC(npcsAroundMe);\n\t\t\t\tbreak;\n\t\t\tcase 72:\n\t\t\t\t//this.props.lookAround(this.props.grid.entities);\n\t\t\t\t//const neutralsAroundMe = getNeutralsAroundMe(this.props.grid.entities)\n\t\t\t\t//if ( neutralsAroundMe.length > 0) this.props.interactWithNeutral(npcsAroundMe, \"harvest\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\t}\n}\n\nconst mapStateToProps = ({ui, grid, player}) => {\n\treturn { fogMode: ui.fogMode, grid, player};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tlookAround: (entities) => dispatch(lookAround(entities)),\n\t\ttalkToNPC: (npcsAroundMe) => dispatch(talkToNPC(npcsAroundMe))\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Player);\n","export function getNPCsAroundMe(entities) {\n\n\tconst entitiesBesideMe = [];\n\tlet aroundMe = '';\n\tlet iconClass = 'floor';\n\tconst npcs = [];\n\tentities.map(row => {\n\t\tconst closeByEntities = row.filter( entity => entity.distanceFromPlayer <= 2);\n\n\t\trow.filter( entity => {\n\t\t\tif (entity.type === \"npc\") {\n\n\t\t\t}\n\t\t});\n\n\t\tif (closeByEntities.length > 0) entitiesBesideMe.push(closeByEntities)\n\n\t});\n\n\tif (entitiesBesideMe.length > 0) {\n\t\tconst npcsAroundMe = [];\n\t\tentitiesBesideMe.map(entities => {\n\t\t\tconst group = entities.filter(entity => entity.type === \"npc\");\n\t\t\tif (group && group.length > 0) {\n\t\t\t\tgroup.map( npc => npcsAroundMe.push(npc) )\n\t\t\t}\n\t\t});\n\t\treturn npcsAroundMe;\n\t} else {\n\t\treturn null; // no one is beside me\n\t}\n\n}\n","import * as t from '../constants/action-types';\n\nexport function lookAround(entities) {\n\n\tconst entitiesBesideMe = [];\n\tlet aroundMe = '';\n\tlet iconClass = 'floor';\n\tconst npcs = [];\n\tentities.map(row => {\n\t\tconst closeByEntities = row.filter( entity => entity.distanceFromPlayer <= 2);\n\n\t\trow.filter( entity => {\n\t\t\tif (entity.type === \"npc\") {\n\t\t\t\tconsole.log(\"hey npc: \", entity);\n\t\t\t}\n\t\t});\n\n\t\tif (closeByEntities.length > 0) entitiesBesideMe.push(closeByEntities)\n\n\t});\n// sets make unique\n\tconsole.log(\"beside me:\" , entitiesBesideMe)\n\n\tif (entitiesBesideMe.length > 0) {\n\n\t\tentitiesBesideMe.map(entities => {\n\t\t\tentities.map( entity => {\n\t\t\t\tconst type = (entity.type === 0) ? \"wall\" : entity.type;\n\t\t\t\tif (type !== \"floor\" && type !== \"wall\") {\n\t\t\t\t\tlet about = '';\n\t\t\t\t\tswitch(entity.type) {\n\t\t\t\t\t\tcase \"weapon\" :\n\t\t\t\t\t\t\tabout = \" \" + entity.name + \" +\" + entity.damage;\n\t\t\t\t\t\t\ticonClass = entity.type;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"shield\" :\n\t\t\t\t\t\t\tabout = \" \" + entity.name + \" +\" + entity.protection;\n\t\t\t\t\t\t\ticonClass = entity.type;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"boss\" :\n\t\t\t\t\t\tcase \"enemy\" :\n\t\t\t\t\t\t\t\tabout = \" \" + entity.name + \" lvl \" + entity.level + \" health \" + entity.health;\n\t\t\t\t\t\t\t\ticonClass = entity.type;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"exit\" :\n\t\t\t\t\t\t\tabout = \" Stairs leading down \";\n\t\t\t\t\t\t\ticonClass = entity.type;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"npc\" :\n\t\t\t\t\t\t\t\tabout = \" \" + entity.profession + \" \" + entity.name;\n\t\t\t\t\t\t\t\ticonClass = entity.type;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"potion\" :\n\t\t\t\t\t\t\t\tabout = \" Health Potion \";\n\t\t\t\t\t\t\t\ticonClass = entity.type;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\taroundMe += about;\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t}\n\n\tconsole.log(\"iconClass: \", iconClass)\n\n\tif (aroundMe === '') {\n\t\taroundMe = \"not much to see here\";\n\t\ticonClass = 'floor';\n\t}\n\n\tconst action = \"Look\";\n\n\tconst payload = {action, aroundMe, iconClass};\n\treturn {\n\t\ttype: t.LOOK_AROUND,\n\t\tpayload\n\t};\n}\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport config from '../config.js';\n\n\nimport playerInput, {\n\tcreateLevel,\n\topeningMessages,\n\tsetDungeonLevel\n} from '../actions/';\n\nimport Cell from '../components/cell';\nimport Player from '../containers/player';\n\nclass Grid extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tviewportWidth: 0,\n\t\t\tviewportHeight: 0\n\t\t};\n\n\t\tthis.handleKeyPress = this.handleKeyPress.bind(this);\n\t\tthis.handleResize = this.handleResize.bind(this);\n\n\t\tthis.VP_HEIGHT_OFFSET = 5; // in ems to match elements above this component\n\t\tthis.VP_MINIMUM_HEIGHT = 22; // in ems\n\n\t\t// set ratios for determining the viewport size\n\t\t// type can either be full or contained which is the original 31,21 ratios while full raitos are both 1 or fullscreen\n\t\tthis.VP_WIDTH_RATIO = (config.VP_TYPE === \"full\") ? config.VP_WIDTH_RATIO_FULL : config.VP_WIDTH_RATIO_CONTAINED;\n\t\tthis.VP_HEIGHT_RATIO = (config.VP_TYPE === \"full\") ? config.VP_HEIGHT_RATIO_FULL : config.VP_HEIGHT_RATIO_CONTAINED;\n\t}\n\n\tcomponentWillMount() {\n\t\t// set the initial veiwport size\n\t\tconst viewportWidth = window.innerWidth / this.VP_WIDTH_RATIO;\n\n\t\tconst viewportHeight = Math.max(\n\t\t\tthis.VP_MINIMUM_HEIGHT,\n\t\t\t(window.innerHeight / this.VP_HEIGHT_RATIO) - this.VP_HEIGHT_OFFSET\n\t\t);\n\n\t\tthis.setState({ viewportWidth, viewportHeight });\n\t\tthis.props.createLevel();\n\t\tthis.props.setDungeonLevel(1,1);\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', _.throttle(this.handleKeyPress, 100));\n\t\twindow.addEventListener('resize', _.debounce(this.handleResize, 500));\n\t\tthis.props.triggerOpeningMessages();\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', _.throttle(this.handleKeyPress, 100));\n\t\twindow.removeEventListener('resize', _.debounce(this.handleResize, 500));\n\t}\n\n\thandleKeyPress(e) {\n\t\tif (typeof (this.props.grid.dungeonLevel) === 'number') {\n\t\t\tswitch (e.keyCode) {\n\t\t\t\t// north\n\t\t\t\tcase 38:\n\t\t\t\tcase 87:\n\t\t\t\t\tthis.props.playerInput([0, -1]);\n\t\t\t\t\tbreak;\n\t\t\t\t// east\n\t\t\t\tcase 39:\n\t\t\t\tcase 68:\n\t\t\t\t\tthis.props.playerInput([1, 0]);\n\t\t\t\t\tbreak;\n\t\t\t\t// south\n\t\t\t\tcase 40:\n\t\t\t\tcase 83:\n\t\t\t\t\tthis.props.playerInput([0, 1]);\n\t\t\t\t\tbreak;\n\t\t\t\t// west\n\t\t\t\tcase 37:\n\t\t\t\tcase 65:\n\t\t\t\t\tthis.props.playerInput([-1, 0]);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\thandleResize(e) {\n\t\tconst viewportWidth = e.target.innerWidth / this.VP_WIDTH_RATIO;\n\t\tconst viewportHeight = Math.max(\n\t\t\tthis.VP_MINIMUM_HEIGHT,\n\t\t\t(e.target.innerHeight / this.VP_HEIGHT_RATIO) - this.VP_HEIGHT_OFFSET\n\t\t);\n\t\tthis.setState({ viewportWidth, viewportHeight });\n\t}\n\n\trender() {\n\t\t// ensure the viewport height and width is always even\n\t\tconst viewportHeight = this.state.viewportHeight - this.state.viewportHeight % 2;\n\t\tconst viewportWidth = this.state.viewportWidth - this.state.viewportWidth % 2;\n\n\t\tconst { entities } = this.props.grid;\n\t\tconst [ playerX, playerY ] = this.props.grid.playerPosition;\n\n\t\t// define the limits of the cells to be displayed in the viewport\n\t\tconst top = _.clamp(playerY - viewportHeight / 2, 0, entities.length - viewportHeight);\n\t\tconst right = Math.max(playerX + viewportWidth / 2, viewportWidth);\n\t\tconst bottom = Math.max(playerY + viewportHeight / 2, viewportHeight);\n\t\tconst left = _.clamp(playerX - viewportWidth / 2, 0, entities[0].length - viewportWidth);\n\n\t\t// create a new array of entities which includes the distance from the player\n\t\t// used to enable fog mode\n\t\tconst newEntities = entities.map((row, i) => row.map((cell, j) => {\n\t\t\tconst distanceFromPlayer = (Math.abs(playerY - i)) + (Math.abs(playerX - j));\n\t\t\tcell.distanceFromPlayer = distanceFromPlayer;\n\t\t\treturn cell;\n\t\t}));\n\n\t\t// create cell components from the entities that are in scope of the viewport\n\t\tconst cells = newEntities.filter((row, i) => i >= top && i < bottom)\n\t\t.map((row, i) => {\n\t\t\treturn (\n\t\t\t\t<div key={i} className=\"row\">\n\t\t\t\t\t{\n\t\t\t\t\t\trow\n\t\t\t\t\t\t.filter((row, i) => i >= left && i < right)\n\t\t\t\t\t\t.map((cell, j) => {\n\n\t\t\t\t\t\t\tif (cell.type === \"player\") {\n\n\t\t\t\t\t\t\t\tconst playerCellProps = {\n\t\t\t\t\t\t\t\t\tkey:j,\n\t\t\t\t\t\t\t\t\tcell: cell,\n\t\t\t\t\t\t\t\t\tdistance:cell.distanceFromPlayer,\n\t\t\t\t\t\t\t\t\tzone:this.props.grid.dungeonLevel,\n\t\t\t\t\t\t\t\t\ttransit:this.props.grid.dungeonTransit,\n\t\t\t\t\t\t\t\t\tvisible:this.props.fogMode,\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn <Player key={j} cellProps={playerCellProps} />\n\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\t\tkey={j}\n\t\t\t\t\t\t\t\t\t\tcell={cell}\n\t\t\t\t\t\t\t\t\t\tdistance={cell.distanceFromPlayer}\n\t\t\t\t\t\t\t\t\t\tzone={this.props.grid.dungeonLevel}\n\t\t\t\t\t\t\t\t\t\ttransit={this.props.grid.dungeonTransit}\n\t\t\t\t\t\t\t\t\t\tvisible={this.props.fogMode}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t);\n\t\t});\n\n\t\treturn (\n\t\t\t<div className=\"grid-wrapper\">\n\t\t\t\t\t{cells}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = ({ ui, grid, player }) => {\n\treturn { fogMode: ui.fogMode, grid, player };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tplayerInput: (vector) => dispatch(playerInput(vector)),\n\t\tcreateLevel: () => dispatch(createLevel()),\n\t\tsetDungeonLevel: (level,transit) => dispatch(setDungeonLevel(level,transit)),\n\t\ttriggerOpeningMessages: () => dispatch(openingMessages())\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Grid);\n","import React from 'react';\nimport config from '../config.js';\n\nexport default ({level}) => {\n\tconst stripClass = (config.VP_TYPE === \"full\") ? \"strip_fullscreen\" : \"strip\";\n\tconst show = (config.GAME_SHOW_TITLE) ? {display: \"flex\"} : {display: \"none\"};\n\treturn (\n\t\t<div className={stripClass} style={show}>\n\t\t\t<h1>\n\t\t\t\t<span\n\t\t\t\t\tclassName={`title title-${level}`}\n\t\t\t\t\t>\n\t\t\t\t{config.GAME_TITLE}\n\t\t\t\t</span> {config.GAME_SUBTITLE}\n\t\t\t</h1>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nconst Messages = ({ messages }) => {\n\treturn (\n\t\t<div className=\"panel messages\">\n\t\t\t<ul>\n\t\t\t\t{\n\t\t\t\t\tmessages.slice(-3).map((msg, i) => {\n\t\t\t\t\t\treturn <li key={i}>{msg}</li>;\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t</ul>\n\t\t</div>\n\t);\n};\n\nconst mapStateToProps = ({ ui }) => {\n\treturn {messages: ui.messages};\n};\n\nexport default connect(mapStateToProps)(Messages);\n","import React from 'react';\nimport { displayCost } from '../../utils/currency-utils';\n\nexport default ({ item, handleMouseOver, handleMouseOut, handleClick, scope  }) => {\nconsole.log(\"item render: \", item);\n\n\treturn (\n    <div className={item.type}\n         onClick={() => handleClick(item,scope)}\n\n         className=\"selectItem\">\n              <div>{item.name}</div>\n              <div>{displayCost(item)}</div>\n           </div>\n\t);\n};\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { tradeItem } from '../../actions/player';\nimport {newMessage} from '../../actions/';\nimport { displayCost } from '../../utils/currency-utils';\nimport StoreItem from './storeItem';\n\nconst rowStle = {display: \"flex\", flexDireciton: \"row\", justifyContent: \"space-between\"};\n\nclass Store extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tconsole.log(\"store \", this.props)\n\n\t\tconst randomIdx = Math.floor( Math.random() * this.props.storeOwner.greetings.length );\n\n\t\tthis.state = {\n\t\t\tconversation: this.props.storeOwner.greetings[randomIdx],\n\t\t\titems: this.props.storeOwner.inventory,\n\t\t\tselectedItem: null,\n\t\t\tstoreOwner: this.props.storeOwner,\n\t\t}\n\n\t\tthis.handleKeyPress = this.handleKeyPress.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeyPress);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeyPress);\n\t}\n\n\thandleSelectItemClick(selectedItem,scope){\n\n\t\tconst self = scope;\n\t\tconsole.log(\"handleSelectItemClick self \", self);\n\t\tself.setState({selectedItem})\n\t}\n\n\thandleKeyPress(e) {\n\t\t// store may not keyboard events...\n\t\t//console.log(\"code:\",e.keyCode)\n\t\t/*\n\t\tswitch (e.keyCode) {\n\n\t\t\tcase ???:\n\t\t\t\tthis.props.toggleFogMode();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\t\t*/\n\t}\n\n\thandleBuyItemClick(){\n\t\tconsole.log(\"buy item\");\n\n\t\tif (this.state.selectedItem === null) return;\n\n\t\tconst buyer = this.props.player;\n\t\tconst seller = this.state.selectedNPC;\n\t\tconst item = {...this.state.selectedItem, currency: this.state.selectedItem.cost};\n\n\t\tthis.props.tradeItem(item, buyer, seller)\n\n\t}\n\n\trender() {\n\t\tconst { npc, player } = this.props;\n\n\t\tconst getItemsForSale = () => {\n\t\t\treturn this.state.items.map( (item,idx) => {\n\t\t\t\treturn (<StoreItem item={item} key={idx} handleClick={this.handleSelectItemClick} scope={this} />)\n\t\t\t})\n\t\t}\n\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div style={rowStle}>\n\t\t\t\t\t<div>{this.state.storeOwner.name}</div>\n\t\t\t\t</div>\n\t\t\t\t<div>{this.state.conversation}</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div style={rowStle}>\n\t\t\t\t\t\t{getItemsForSale()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button className=\"npcStoreButton\" onClick={()=> this.handleBuyItemClick() }>Buy</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = ({grid, player}) => {\n\treturn {grid, player};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\ttradeItem: (item, buyer, seller) => dispatch(tradeItem(item, buyer, seller)),\n\t\tnewMessage: (message) => dispatch(newMessage(message))\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Store);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { npcBoughtItem, npcSoldItem, npcTradedItem } from '../../actions/npc';\nimport Store from './store';\n\nconst defaultItems = [\n\t{name: \"sword\", cost: 30, currency: \"copper\"},\n\t{name: \"health potion\", cost: 30, currency: \"copper\"},\n\t{name: \"shield\", cost: 30, currency: \"copper\"},\n]\n\nconst rowStle = {display: \"flex\", flexDireciton: \"row\", justifyContent: \"space-between\"};\n\nclass NPCStore extends Component {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.state = {\n\t\t\tconversation: \"conversational text here...\",\n\t\t\titems: defaultItems,\n\t\t\tselectedItem: defaultItems[0],\n\t\t\tnpcs: [],\n\t\t\tselectedNPC: null\n\t\t}\n\n\t\tthis.handleKeyPress = this.handleKeyPress.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeyPress);\n\t}\n\n\tcomponentDidUpdate(nextProps) {\n\t\twindow.addEventListener('keydown', this.handleKeyPress);\n\n\t\tconsole.log(\"npc-store componentDidUpdate\", nextProps);\n\n\t\tif (nextProps.player.npcsAroundMe > 0) {\n\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeyPress);\n\t}\n\n\tcomponentWillReceiveProps(nextProps){\n\t\tconsole.log(\"npc-store componentDidReceiveProps\", nextProps)\n\t}\n\n\thandleItemClick(e){\n\n\t}\n\n\thandleKeyPress(e) {\n\t\t// store may not keyboard events...\n\t\t//console.log(\"code:\",e.keyCode)\n\t\t/*\n\t\tswitch (e.keyCode) {\n\n\t\t\tcase ???:\n\t\t\t\tthis.props.toggleFogMode();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\t\t*/\n\t}\n\n\thandleSelectNPC(selectedNPC){\n\n\t\tthis.setState({selectedNPC})\n\t}\n\n\trender() {\n\t\tconst { npc, player } = this.props;\n\n\t\t// if there are multiple npcs around, first you need to pick one to interact with...\n\t\tconst getPickNPC = () => {\n\t\t\tif (player.npcsAroundMe.length > 0 && this.state.selectedNPC === null) {\n\n\t\t\t\tconst list = player.npcsAroundMe.map( (npc, idx) => {\n\t\t\t\t\t//const class = (npc.selected) ? selectItem : ;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={idx}\n\t\t\t\t\t\t\t\t className=\"selectItem\"\n\t\t\t\t\t\t\t\t onClick={() => this.handleSelectNPC(npc)}>\n\t\t\t\t\t\t\t\t <div>\n\t\t\t\t\t\t\t\t \t{/* <img src={npc.portrait} /> */}\n\t\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t\t\t <div>\n\t\t\t\t\t\t\t\t \t<p>{npc.name}</p>\n\t\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t})\n\n\t\t\t\treturn (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>Who would you like to speak to?</div>\n\t\t\t\t\t\t{list}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\n\n\t\t\t} else return null;\n\t\t}\n\n\t\t// the player has picked an NPC and this NPC can trade items\n\t\tconst getStore = () => {\n\t\t\tif ( this.state.selectedNPC !== null ) {\n\t\t\t\tconst storeOwner = this.state.selectedNPC;\n\t\t\t\tconsole.log(\"owner: \", storeOwner)\n\t\t\t\tconsole.log(\"this.state: \", this.state)\n\t\t\t\treturn <Store storeOwner={storeOwner} />\n\t\t\t} else {\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"panel\">\n\t\t\t  {getPickNPC()}\n\t\t\t\t{getStore()}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = ({grid, player}) => {\n\treturn {grid, player};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\t//lookAround: (entities) => dispatch(lookAround(entities)),\n\t\t//buyItem: (npcItem) => dispatch(buyItem(npcItem)),\n\t\t//sellItem: (playerItem) => dispatch(sellItem(playerItem)),\n\t\t//tradeItem: (playerItem, npcItem) => dispatch(tradeItem(playerItem, npcIte)),\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NPCStore);\n\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport { toggleFogMode, restartGame } from '../actions';\n\nclass PlayerSettings extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.handleKeyPress = this.handleKeyPress.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeyPress);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeyPress);\n\t}\n\n\trender() {\n\t\tconst { fogMode, restartGame, toggleFogMode } = this.props;\n\t\treturn (\n\t\t\t<div className=\"panel\">\n\t\t\t\t<div className=\"score-item\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tonChange={toggleFogMode}\n\t\t\t\t\t\tid=\"toggle\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tchecked={fogMode}\n\t\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor=\"toggle\">\n\t\t\t\t\tToggle fog mode\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"score-item\">\n\t\t\t\t\t<div onClick={restartGame} className=\"restart-btn\"></div>\n\t\t\t\t\t<span onClick={restartGame} className=\"setting-label\">Restart</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\thandleKeyPress(e) {\n\t\t//console.log(\"code:\",e.keyCode)\n\t\tswitch (e.keyCode) {\n\t\t\t// north\n\t\t\tcase 70:\n\t\t\t\tthis.props.toggleFogMode();\n\t\t\t\tbreak;\n\t\t\tcase 82:\n\t\t\t\tthis.props.restartGame();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\t}\n}\n\nconst mapStateToProps = ({ui, grid, player}) => {\n\treturn { fogMode: ui.fogMode, grid, player};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\ttoggleFogMode: () => dispatch(toggleFogMode()),\n\t\trestartGame: () => dispatch(restartGame()),\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlayerSettings);\n","import React from 'react';\n\nexport default ({ iconClass, title, value }) => {\n\treturn (\n\t\t<div className=\"score-item\">\n\t\t\t<div className={`icon cell ${iconClass}`}/>\n\t\t\t<span className=\"score-label\">{`${title}: ${value}`}</span>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport Score from './score';\nimport config from '../config.js';\n\nexport default ({ grid, player }) => {\n\tconst panelClass = (config.VP_TYPE === \"full\") ? \"panel_fullscreen\" : \"panel\";\n\tconst classes = `${panelClass} scoreboard`;\n\treturn (\n\t\t<div className={classes}>\n\t\t\t<Score\n\t\t\t\ticonClass=\"potion\"\n\t\t\t\ttitle=\"Health\"\n\t\t\t\tvalue={player.health}\n\t\t\t\t/>\n\t\t\t<Score\n\t\t\t\ticonClass={`back-${grid.dungeonLevel}`}\n\t\t\t\ttitle=\"Zone\"\n\t\t\t\tvalue={`${grid.dungeonLevel} - ${grid.dungeon.exitsComplete}`}\n\t\t\t\t/>\n\t\t\t<Score\n\t\t\t\ticonClass=\"weapon\"\n\t\t\t\ttitle=\"Weapon\"\n\t\t\t\tvalue={`${player.weapon.name} (+${player.weapon.damage})`}\n\t\t\t\t/>\n\t\t\t\t<Score\n\t\t\t\t\ticonClass=\"shield\"\n\t\t\t\t\ttitle=\"Amour\"\n\t\t\t\t\tvalue={`${player.shield.name} (+${player.shield.protection})`}\n\t\t\t\t\t/>\n\t\t\t<Score\n\t\t\t\t\ticonClass=\"gold\"\n\t\t\t\t\ttitle={config.CURRENCY_GOLD_LABEL}\n\t\t\t\t\tvalue={`${player.currency.gold}`}\n\t\t\t\t\t/>\n\t\t\t<Score\n\t\t\t\t\ticonClass=\"silver\"\n\t\t\t\t\ttitle={config.CURRENCY_SILVER_LABEL}\n\t\t\t\t\tvalue={`${player.currency.silver}`}\n\t\t\t\t\t/>\n\t\t\t<Score\n\t\t\t\t\ticonClass=\"copper\"\n\t\t\t\t\ttitle={config.CURRENCY_COPPER_LABEL}\n\t\t\t\t\tvalue={`${player.currency.copper}`}\n\t\t\t\t\t/>\n\t\t\t<Score\n\t\t\t\ticonClass=\"player\"\n\t\t\t\ttitle=\"Level\"\n\t\t\t\tvalue={Math.floor(player.xp / 100)}\n\t\t\t\t/>\n\t\t\t<Score\n\t\t\t\ticonClass=\"triangle\"\n\t\t\t\ttitle=\"XP to level up\"\n\t\t\t\tvalue={100 - player.xp % 100}\n\t\t\t\t/>\n\t\t\t\t<Score\n\t\t\t\t\ticonClass={player.examining.iconClass}\n\t\t\t\t\ttitle={player.examining.action}\n\t\t\t\t\tvalue={player.examining.aroundMe}\n\t\t\t\t\t/>\n\t\t</div>\n\t);\n};\n","import React, { Component } from 'react';\nimport config from '../config.js';\n\nexport default class extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\ttips: [\n\t\t\t\t`Use WASD or arrow keys to move`,\n\t\t\t\t`Press L to look at tiles around you`,\n\t\t\t\t`Defeat the Boss in Zone 4 to win`,\n\t\t\t\t`Toggle Fog Mode with the 'F' key`,\n\t\t\t\t`Restart the game with the 'R' key`,\n\t\t\t\t`Defeat enemies to increase your XP`,\n\t\t\t\t`Level up to increase your damage`,\n\t\t\t\t`A new weapon might not be as good as your current one`,\n\t\t\t\t`Be sure to gain as much XP as you can in each zone`\n\t\t\t],\n\t\t\tdisplayIdx: 0,\n\t\t\tintervalId: null\n\t\t};\n\t}\n\tcomponentDidMount() {\n\t\tlet counter = 1;\n\t\tconst intervalId = setInterval(() => {\n\t\t\tif (counter === this.state.tips.length) {\n\t\t\t\tcounter = 0;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tdisplayIdx: counter\n\t\t\t});\n\t\t\tcounter++;\n\t\t}, 10000);\n\n\t\tthis.setState({\n\t\t\tintervalId\n\t\t});\n\t}\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.state.intervalId);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"tips\">\n\t\t\t\t<p> Tip: {this.state.tips[this.state.displayIdx]}</p>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport config from '../config.js';\nimport Backpack from './backpack';\nimport Game from './game';\nimport Header from '../components/header';\nimport Messages from './messages';\nimport NPCStore from './npc-store/npc-store';\nimport PlayerSettings from './player-settings';\nimport Scoreboard from '../components/scoreboard';\nimport Tips from './tips';\nimport axios from 'axios';\n\nclass DungeonCrawler extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\trequiresAuthentication: (config.BACKEND === \"python\"),\n\t\t\tauthenticated: false,\n\t\t\tgreet: \"\",\n\t\t\tauthenticateCheckComplete: false,\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\tconsole.log(\"DungeonCrawler\", this.state);\n\t\tif (this.state.requiresAuthentication) this.handleTwitterLoginClick();\n\t}\n\n\thandleTwitterLoginClick() {\n\n\t\tconsole.log(\"handleTwitterLoginClick\", this.state);\n\n\t\tconst self = this;\n\n\t\tconst url = (document.domain === \"127.0.0.1\") ? 'http://127.0.0.1:5000/api/twitter/auth' : 'https://' + document.domain +  '/api/twitter/auth'\n\t\t\n\t\tlet authenticated, greet, authenticateCheckComplete;\n\n\t\taxios.get(url).then( response => {\n  \n\t\t\t  console.log(\"Twitter response: \", response.data);\n\t\t\t  if (response.data.screen_name) {\n\t\t\t\tauthenticated = true;\n\t\t\t\tgreet = response.data.screen_name + \", shall we begin?\";\n\t\t\t  }            \n\t\t\t}\n\t\t  ).catch(error => {\n  \n\t\t\tconsole.log(\"Twitter error: \", error);         \n\t\t\tthis.errored = error\n\t\t\tgreet = \"\";\n\t\t\tauthenticated = false;\n\n\t\t  }).finally(() => {\n\t\t\t\t\n\t\t\tauthenticateCheckComplete = true;\n\n\t\t\tself.setState({\n\t\t\t\tauthenticated,\n\t\t\t\tgreet,\n\t\t\t\tauthenticateCheckComplete})\n\t\t})\n\t}\n\t\n\trender() {\n\t \n\t\tconst {grid, player} = this.props;\n\n\t\tconst sidebarClass = (config.VP_TYPE === \"full\") ? \"sidebar_fullscreen\" : \"sidebar\";\n\t\tconst app = (config.VP_TYPE === \"full\") ? \"app_fullscreen\" : \"app\";\n\n\t\tconst getTipWithSidebar = () => {\n\t\t\tif (!config.TIPS_ALONG_BOTTOM) return (<Tips/>)\n\t\t\telse return null;\n\t\t}\n\n\t\tconst getTipsAtBottom = () => {\n\t\t\tif (config.TIPS_ALONG_BOTTOM) return (<Tips/>)\n\t\t\telse return null;\n\t\t}\n\n\t\tconst getSignin = () => {\n\t\t\t\n\t\t\tif (this.state.requiresAuthentication \n\t\t\t\t&& this.state.authenticateCheckComplete \n\t\t\t\t&& !this.state.authenticated) {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"signinContainer\" style={{margin: 20}}>\n\t\t\t\t\t\t<a href=\"/api/twitter/auth\" style={{color: \"white\", textDecoration: \"none\", cursor: \"pointer\"}}>Signin with Twitter</a>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t} else if (this.state.requiresAuthentication \n\t\t\t\t&& this.state.authenticateCheckComplete \t\n\t\t\t\t&& this.state.authenticated) {\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"signinContainer\" style={{margin: 20}}>\n\t\t\t\t\t\t<p>{this.state.greet}</p>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t} else return null;\n\t\t}\n\n\t\tconsole.log(\"config: \", config.BACKEND);\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Header level={grid.dungeonLevel}/>\n\t\t\t\t<div id={app}>\n\t\t\t\t\t<Game/>\n\t\t\t\t\t\t<div className={sidebarClass}>\n\t\t\t\t\t\t\t{getSignin()}\n\t\t\t\t\t\t\t<div className=\"npcStore\">\n\t\t\t\t\t\t\t\t<NPCStore />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"backpack\">\n\t\t\t\t\t\t\t\t<Backpack />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Scoreboard player={player} grid={grid}/>\n\t\t\t\t\t\t\t<PlayerSettings/>\n\t\t\t\t\t\t\t<Messages/>\n\t\t\t\t\t\t\t{getTipWithSidebar()}\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{getTipsAtBottom()}\n\t\t\t</div>);\n\t};\n};\n\nconst mapStateToProps = ({ ui, grid, player }) => {\n\treturn { ui, grid, player };\n};\n\nexport default connect(mapStateToProps)(DungeonCrawler);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport { enableBatching } from 'redux-batched-actions';\nimport thunk from 'redux-thunk';\nimport { createLogger } from 'redux-logger'\nimport reducers from './reducers';\nimport DungeonCrawler from './containers/DungeonCrawler';\n//import * as serviceWorker from './serviceWorker';\n\nrequire('./styles/main.sass'); // root stylesheeet - .css, .scss or .sass\n\n// credit https://gist.github.com/smashercosmo/6dc9c26ce1e2e3dafde5\nconst actionTransformer = action => {\n  if (action.type === 'BATCHING_REDUCER.BATCH') {\n    action.payload.type = action.payload.reduce((result, next) => {\n      const prefix = result ? result + ' => ' : '';\n      return prefix + next.type;\n    }, '');\n\n    return action.payload;\n  }\n\n  return action;\n};\n\nconst loggerMiddleware = createLogger({actionTransformer});\n\nconst createStoreWithMiddleware = applyMiddleware(thunk, loggerMiddleware)(createStore);\n\nReactDOM.render(\n  <Provider store={createStoreWithMiddleware(enableBatching(reducers))}>\n    <DungeonCrawler/>\n  </Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}